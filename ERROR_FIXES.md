# ๐ง ุงูุฃุฎุทุงุก ุงูุชู ุชู ุฅุตูุงุญูุง

## 1๏ธโฃ ุฎุทุฃ EADDRINUSE - ุงููููุฐ ูุณุชุฎุฏู

### โ **ุงูุฎุทุฃ:**
```
Error: listen EADDRINUSE: address already in use :::5000
```

### ๐ **ุงูุดุฑุญ:**
ูุฐุง ุงูุฎุทุฃ ูุญุฏุซ ุนูุฏูุง ุชุญุงูู ุชุดุบูู ุงูุฎุงุฏู ุนูู ูููุฐ (Port) ูุณุชุฎุฏู ุจุงููุนู ูู ูุจู ุนูููุฉ ุฃุฎุฑู.

**ุงูุฃุณุจุงุจ ุงูุดุงุฆุนุฉ:**
1. ุงูุฎุงุฏู ูุนูู ุจุงููุนู ูู ุชูุฑูููุงู ุขุฎุฑ
2. ุชุทุจูู ุขุฎุฑ ูุณุชุฎุฏู ููุณ ุงููููุฐ (5000)
3. ุฅููุงู ุงูุฎุงุฏู ุจุดูู ุบูุฑ ุตุญูุญ (ุงูุนูููุฉ ูุง ุฒุงูุช ุชุนูู ูู ุงูุฎูููุฉ)

### โ **ุงูุญู ุงููุคูุช (ูุฏููุงู):**

#### ุนูู Windows:
```bash
# 1. ุงูุจุญุซ ุนู ุงูุนูููุฉ ุงูุชู ุชุณุชุฎุฏู ุงููููุฐ
netstat -ano | findstr :5000

# 2. ุณูุธูุฑ ูู ุฑูู PID ูุซู:
# TCP    0.0.0.0:5000    0.0.0.0:0    LISTENING    12588
#                                                   โ ูุฐุง ูู PID

# 3. ุฅููุงู ุงูุนูููุฉ
taskkill /PID 12588 /F
```

#### ุนูู Linux/Mac:
```bash
# 1. ุงูุจุญุซ ุนู ุงูุนูููุฉ
lsof -i :5000

# 2. ุฅููุงู ุงูุนูููุฉ
kill -9 PID_NUMBER
```

### โ **ุงูุญู ุงูุฏุงุฆู (ุชู ุชุทุจููู ูู ุงูููุฏ):**

ุชู ุฅุถุงูุฉ ูุนุงูุฌ ุฃุฎุทุงุก ูู [server.js:109](server.js:109):

```javascript
// Handle server errors
server.on('error', (error) => {
  if (error.code === 'EADDRINUSE') {
    console.error(`\nโ ุฎุทุฃ: ุงููููุฐ ${PORT} ูุณุชุฎุฏู ุจุงููุนู`);
    console.error(`๐ก ุงูุญู: ุฃููู ุงูุฎุงุฏู ุงูุขุฎุฑ ุฃู ุบููุฑ ุงููููุฐ ูู ููู .env\n`);
    process.exit(1);
  } else {
    console.error('โ ุฎุทุฃ ูู ุจุฏุก ุงูุฎุงุฏู:', error);
    process.exit(1);
  }
});
```

**ุงูุขู ุนูุฏ ุญุฏูุซ ุงูุฎุทุฃ:**
- ุณูุธูุฑ ุฑุณุงูุฉ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
- ุณูุฎุจุฑู ุจุงูุญู ุงูููุชุฑุญ
- ุณูููู ุงูุฎุงุฏู ุจุดูู ูุธูู

---

## 2๏ธโฃ ุฎุทุฃ sequelize.sync({ alter: true })

### โ **ุงูุฎุทุฃ ุงูุณุงุจู:**
```javascript
await sequelize.sync({ alter: true });
```

### ๐ **ุงููุดููุฉ:**
- `alter: true` ูุนุฏู ุงูุฌุฏุงูู ุชููุงุฆูุงู ูู ูู ูุฑุฉ ูุจุฏุฃ ูููุง ุงูุฎุงุฏู
- **ุฎุทูุฑ ุฌุฏุงู** ูุฃูู ูุฏ ูุญุฐู ุฃุนูุฏุฉ ุฃู ุจูุงูุงุช
- ุบูุฑ ุขูู ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ (Production)

**ูุซุงู ุนูู ุงูุฎุทุฑ:**
```javascript
// ุงูููู: ูุฏูู Model ุจู ุญูู "notes"
const Table = {
  notes: DataTypes.TEXT
};

// ุบุฏุงู: ุญุฐูุช ุงูุญูู ูู Model
const Table = {
  // notes ุชู ุญุฐูู
};

// ุนูุฏ ุจุฏุก ุงูุฎุงุฏู ูุน alter: true:
// โ ุณูุญุฐู ุนููุฏ "notes" ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
// โ ุชุถูุน ูู ุงูุจูุงูุงุช ููู!
```

### โ **ุงูุญู (ุชู ุชุทุจููู):**

ุชู ุชุบููุฑ ุงูููุฏ ูู [server.js:91](server.js:91):

```javascript
// โ ุขูู - ูุง ูุนุฏู ุดูุก
await sequelize.sync({ alter: false });
```

**ุงูุทุฑููุฉ ุงูุตุญูุญุฉ ูุชุนุฏูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```bash
# ุงุณุชุฎุฏู Migrations
npm run migrate
```

---

## 3๏ธโฃ ูุนุงูุฌุฉ ุฅุดุงุฑุงุช ุงูุฅููุงู (SIGTERM, SIGINT)

### โ **ุงูุชุญุณูู ุงููุถุงู:**

ุชู ุฅุถุงูุฉ ูุนุงูุฌุงุช ูู [server.js:132-140](server.js:132):

```javascript
// Handle graceful shutdown
process.on('SIGTERM', () => {
  console.log('\nโธ๏ธ  ุชู ุงุณุชูุจุงู ุฅุดุงุฑุฉ SIGTERMุ ุฌุงุฑู ุฅููุงู ุงูุฎุงุฏู ุจุดูู ุขูู...');
  process.exit(0);
});

process.on('SIGINT', () => {
  console.log('\nโธ๏ธ  ุชู ุงุณุชูุจุงู ุฅุดุงุฑุฉ SIGINT (Ctrl+C)ุ ุฌุงุฑู ุฅููุงู ุงูุฎุงุฏู ุจุดูู ุขูู...');
  process.exit(0);
});
```

**ุงููุงุฆุฏุฉ:**
- ุนูุฏ ุงูุถุบุท ุนูู `Ctrl+C` ูุฅููุงู ุงูุฎุงุฏู
- ุณูุชู ุฅููุงูู ุจุดูู ูุธูู ูุขูู
- ูู ุชุจูู ุนูููุงุช ูุนููุฉ ูู ุงูุฎูููุฉ

---

## ๐ ููุฎุต ุงูุชุญุณููุงุช

### ูุจู ุงูุชุนุฏูู:
```javascript
// โ ูุง ุชูุฌุฏ ูุนุงูุฌุฉ ููุฃุฎุทุงุก
app.listen(PORT, () => {
  console.log('Server running');
});

// โ ุฎุทูุฑ - ูุนุฏู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู
await sequelize.sync({ alter: true });

// โ ูุง ุชูุฌุฏ ูุนุงูุฌุฉ ูุฅุดุงุฑุงุช ุงูุฅููุงู
```

### ุจุนุฏ ุงูุชุนุฏูู:
```javascript
// โ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
const server = app.listen(PORT, () => {
  console.log('Server running');
});

server.on('error', (error) => {
  if (error.code === 'EADDRINUSE') {
    console.error('ุงููููุฐ ูุณุชุฎุฏู');
  }
  process.exit(1);
});

// โ ุขูู - ูุง ูุนุฏู ุดูุก
await sequelize.sync({ alter: false });

// โ ูุนุงูุฌุฉ ูุธููุฉ ููุฅููุงู
process.on('SIGTERM', () => process.exit(0));
process.on('SIGINT', () => process.exit(0));
```

---

## ๐ฏ ููููุฉ ุชุฌูุจ ุงูุฃุฎุทุงุก ูุณุชูุจูุงู

### 1. ุชุดุบูู ุฎุงุฏู ูุงุญุฏ ููุท:
```bash
# ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฎุงุฏู ุขุฎุฑ ูุนูู
netstat -ano | findstr :5000

# ุฅุฐุง ูุฌุฏุช ุนูููุฉุ ุฃููููุง ุฃููุงู
taskkill /PID <ุฑูู_ุงูุนูููุฉ> /F

# ุซู ุงุจุฏุฃ ุงูุฎุงุฏู
npm start
```

### 2. ุงุณุชุฎุฏุงู ูููุฐ ูุฎุชูู:
ูู ููู `.env`:
```bash
PORT=5001  # ุจุฏูุงู ูู 5000
```

### 3. ุงุณุชุฎุฏุงู Nodemon ููุชุทููุฑ:
```bash
# ูู package.json
"dev": "nodemon server.js"

# ููุชุดุบูู
npm run dev
```
Nodemon ุณูุนูุฏ ุชุดุบูู ุงูุฎุงุฏู ุชููุงุฆูุงู ุนูุฏ ุชุนุฏูู ุงููููุงุช.

### 4. ุนุฏู ุงุณุชุฎุฏุงู alter ูู ุงูุฅูุชุงุฌ:
```javascript
// โ ุตุญูุญ
if (process.env.NODE_ENV === 'production') {
  await sequelize.sync({ alter: false });
} else {
  await sequelize.sync({ alter: false }); // ุญุชู ูู ุงูุชุทููุฑ!
}

// ุงุณุชุฎุฏู Migrations ุฏุงุฆูุงู
npm run migrate
```

---

## ๐ ุชุดุฎูุต ุงููุดุงูู

### ุฅุฐุง ุธูุฑ ุฎุทุฃ "EADDRINUSE":
1. **ุชุญูู ูู ุงูุนูููุงุช ุงูุนุงููุฉ:**
   ```bash
   netstat -ano | findstr :5000
   ```

2. **ุฃููู ุงูุนูููุงุช:**
   ```bash
   taskkill /PID <ุฑูู_ุงูุนูููุฉ> /F
   ```

3. **ุฃู ุบููุฑ ุงููููุฐ:**
   ูู `.env`:
   ```
   PORT=5001
   ```

### ุฅุฐุง ุธูุฑ ุฎุทุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
1. **ุชุญูู ูู ุงูุงุชุตุงู:**
   ```bash
   # ูู .env
   DB_HOST=localhost
   DB_PORT=3306
   DB_NAME=restaurant_ordering_db
   DB_USER=root
   DB_PASSWORD=your_password
   ```

2. **ุชุญูู ูู ูุฌูุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
   ```sql
   SHOW DATABASES;
   ```

3. **ุดุบูู Migrations:**
   ```bash
   npm run migrate
   ```

---

## โ ุงูุญุงูุฉ ุงูุญุงููุฉ

ุงูุขู ุงูุฎุงุฏู ูุนูู ุจุดูู ุตุญูุญ:
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงููููุฐ ุงููุณุชุฎุฏู
- โ ุงุณุชุฎุฏุงู ุขูู ูู sequelize.sync
- โ ุฅููุงู ูุธูู ููุฎุงุฏู
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

**ุฑุงุจุท ุงูุฎุงุฏู:**
```
http://localhost:5000
```

**ุญุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```
โ ูุชุตู
โ ุฌููุน ุงูุฌุฏุงูู ููุฌูุฏุฉ
โ ุญูู qrCodeImage ูุถุงู ุจูุฌุงุญ
```
